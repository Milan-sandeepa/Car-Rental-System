<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Easy Car | Registration</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
            crossorigin="anonymous"></script>

    <link rel="stylesheet" href="assets/css/style.css">
    <link href="assets/img/favicon.png" rel="icon" type="image/x-icon">
    <link rel="stylesheet" href="assets/fonts/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200&display=swap" rel="stylesheet">
</head>
<body>
<header class="fixed-top" id="header">
    <div>
        <nav class="navbar p-0 navbar-expand-lg navbar-dark bg-dark bg-body-tertiary">
            <div class="container-fluid">
                <a class="navbar-brand ms-3" href="index.html"><img src="assets/img/logo.png" alt="logo"></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">About Us</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Contact</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="register.html">Register</a>
                        </li>
                    </ul>
                    <button class="btn btn-light me-3" data-bs-toggle="modal" data-bs-target="#exampleModal">Login
                    </button>
                </div>
            </div>
        </nav>
    </div>
</header>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Sign In</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!--            form Start-->
                <form action="#">
                    <div class="input-group mb-3">
                        <span class="input-group-text"><i class="fa fa-envelope"></i></span>
                        <input type="text" class="form-control" placeholder="Email">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text"><i class="fa fa-lock"></i></span>
                        <input type="password" class="form-control" placeholder="Password">
                    </div>
                    <div class="d-grid mb-3">
                        <button type="button" class="btn btn-primary">Sign In</button>
                        <p class="text-center mt-3">
                            Register Now for Free by clicking <a href="register.html">Register Now</a> Button
                        </p>
                    </div>
                </form>
                <!--            form end-->
            </div>
        </div>
    </div>
</div>

<main class="container">
    <section class="row" id="signup-form">
        <div class=" col-lg-4 bg-white rounded-top rounded-bottom" id="form-top" style="width: 40vw;margin: auto;">
            <h2 class="text-center pt-3">Signup Now</h2>
            <p class="text-center text-muted lead">It's Free and Takes a Minute</p>

            <!--            form Start-->
            <form id="userForm">
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="fa fa-user"></i></span>
                    <input type="text" class="form-control" placeholder="Name" id="txtUserName" name="name">
                </div>
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="fa fa-list-numeric"></i></span>
                    <select class="form-control" id="txtUserGender" name="gender">
                        <option value="None">Select Gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>
                </div>
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="fa fa-address-book"></i></span>
                    <input type="text" class="form-control" placeholder="Address" id="txtUserAddress" name="address">
                </div>
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="fa fa-phone"></i></span>
                    <input type="text" class="form-control" placeholder="Contact Number" id="txtUserContact"
                           name="contact">
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="fa fa-envelope"></i></span>
                    <input type="text" class="form-control" placeholder="Email" id="txtUserEmail" name="email">
                </div>

                <!--image upload section start-->
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="fa fa-list-numeric"></i></span>
                    <input type="text" class="form-control" placeholder="Nic/License Number" id="txtUserNic" name="nic/licenseNo">
                    <span class="input-group-text"><i class="fa fa-file"></i></span>
                    <input id="file-1" type="file" name="nic/licensePhoto" class="form-control" placeholder="Nic Photo Upload here">
                </div>
                <!--image upload section end-->

                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="fa fa-lock"></i></span>
                    <input type="password" class="form-control" placeholder="Password" id="txtUserPwd" name="userPwd">
                </div>
                <div class="input-group mb-3">
                    <span class="input-group-text"><i class="fa fa-lock"></i></span>
                    <input type="password" class="form-control" placeholder="Conform Password" id="txtUserConPwd"
                           name="userConPwd">
                </div>
                <div class="d-grid mb-3">
                    <button type="button" class="btn btn-primary" id="btnUser">SignUp Now</button>
                    <p class="text-center text-muted mt-2">When You Register by Clicking Signup Button, You Agree to our
                        <a href="#">Terms and Conditions</a>and <a href="#">Privacy Policy</a></p>

                    <p class="text-center">
                        Already Have an Account ? <a href="#" data-bs-toggle="modal" data-bs-target="#exampleModal">Login
                        Here</a>
                    </p>
                </div>
            </form>
            <!--            form end-->
        </div>
    </section>

    <footer>
        <div class="footer">
            <div class="footer mt-2">
                <p>@ All CopyRights Reserved 2023</p>
            </div>
        </div>
    </footer>
</main>
<script src="assets/js/jquery-3.6.1.min.js"></script>
<!--<script src="assets/js/bootstrap.min.js"></script>-->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
        integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
        crossorigin="anonymous"></script>

<script>
    let baseUrl = "http://localhost:8080/Car_Rental_System_war/";


    //Add User
    $("#btnUser").click(function () {


        let formData = new FormData();

        let name = $("#txtUserName").val();
        let gender = $("#txtUserGender").val();
        let address = $("#txtUserAddress").val();
        let contact = $("#txtUserContact").val();
        let email = $("#txtUserEmail").val();
        let nicNo = $("#txtUserNic").val();
        let pass = $("#txtUserPwd").val();

        formData.append("name",name);
        formData.append("gender",gender);
        formData.append("address",address);
        formData.append("contact",contact);
        formData.append("email",email);
        formData.append("nic/licenseNo",nicNo);
        formData.append("pass",pass);

        let file1 = $("#file-1")[0].files[0];
        let fileName1 = $("#file-1")[0].files[0].name;

        formData.append("nic/licensePhoto",file1,fileName1);

        $.ajax({
            url: baseUrl + "user",
            method: "post",
            data: formData,
            dataType: "json",
            async: true,
            contentType: false,
            processData: false,
            enctype:"multipart/form-data",
            success: function (res) {
                // invoked if the response status code is in 200 range
                console.log("Success Method Invoked")
                console.log(res);
                alert(res.message);
                // getAllCustomers();

            },
            error: function (error) {
                // invokes if status code range is 500 range or 400 range
                console.log("Error Method Invoked");
                console.log(JSON.parse(error.responseText));
                alert(JSON.parse(error.responseText).message);

            }
        });

    });

</script>
</body>
</html>