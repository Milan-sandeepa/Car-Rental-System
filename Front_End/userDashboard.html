<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title id="proTile"></title>
    <meta name="keywords" content="Easy car rental private limited,online car rental">
    <meta name="description" content="This is a Easy Car Rental online booking system">
    <link href="assets/img/favicon.png" rel="icon" type="image/x-icon">
    <meta name="author" content="Online Car Booking Website">
    <meta name="owner" content="Milan Sandeepa">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--    <link rel="stylesheet" href="assets/css/bootstrap.min.css">-->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
            crossorigin="anonymous"></script>

    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/layets.css">
    <link rel="stylesheet" href="assets/css/normalize.css">
    <link rel="stylesheet" href="assets/fonts/css/all.min.css">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
</head>
<body>
<header class="fixed-top" id="header">
    <div>
        <nav class="navbar p-0 navbar-expand-lg navbar-dark bg-dark bg-body-tertiary">
            <div class="container-fluid">
                <a class="navbar-brand ms-3" href="index.html"><img src="assets/img/logo.png" id="logo" alt="logo"></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link user" data-bs-toggle="dropdown-menu" data-bs-target="#navbarNav"
                               aria-current="page" href="#">
                                <img src="assets/img/icons/bell.png" alt="notify" class="icon">
                                <p class="count">1</p>
                            </a>
                            <div class="dropdown-menu" id="#navbarNav">
                                <div class="dp-main-menu">
                                    <a href="#" class="dropdown-item message-item">
                                        <img src="assets/img/icons/servers.png" alt="" class="user-note">
                                        <p>fggfdfgdfgdfgf</p>
                                    </a>
                                </div>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link user" data-bs-toggle="dropdown" aria-current="page" href="#">
                                <img src="assets/img/icons/message.png" alt="notify" class="icon">
                                <p class="count">1</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link user" data-bs-toggle="dropdown" aria-current="page" href="#">
                                <img src="assets/img/icons/profile.png" alt="notify" class="icon">
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link user" data-bs-toggle="dropdown" aria-current="page" href="#" id="settingIcon">
                                <img src="assets/img/icons/settings.png" alt="notify" class="icon">
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>

    <!--    Sidebar start-->
    <div class="left-menu d-none d-sm-block">
        <div class="menubar-content">
            <nav>
                <ul id="sidebar">
                    <li class="active mt-2 d-flex justify-content-center" id="homeBtn">
                        <a href="#" ><i class="fa-solid fa-house"></i>Dashboard</a>
                    </li>
<!--                    <li id="carBtn">-->
<!--                        <a href="#"><i class="fa-solid fa-car-side"></i>Car</a>-->
<!--                    </li>-->
<!--                    <li id="customerBtn">-->
<!--                        <a href="#"><i class="fa-solid fa-users"></i>Customer</a>-->
<!--                    </li>-->
<!--                    <li id="driverBtn">-->
<!--                        <a href="#"><i class="fa-solid fa-user"></i>Driver</a>-->
<!--                    </li>-->
                    <li id="bookingBtn">
                        <a href="#"><i class="fa-solid fa-book"></i>Booking</a>
                    </li>
<!--                    <li id="incomeBtn">-->
<!--                        <a href="#"><i class="fa-solid fa-dollar-sign"></i>Income</a>-->
<!--                    </li>-->
                    <li id="settingBtn">
                        <a href="#"><i class="fa-solid fa-gear"></i>Setting</a>
                    </li>
                    <li id="signOutBtn">
                        <a href="#"><i class="fa-solid fa-right-from-bracket"></i>Sign Out</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
    <!--    Sidebar end-->
</header>

<!--Dashboard start-->
<main class="container" id="dashboard-section">
    <div class="col-12 col-md-2 col-xl-3 d-flex ms-3">
    <div class="d-flex" style="margin-top: 30px; margin-left: 15px;font-size: 20px">
        <i class="fa-solid fa-globe mt-1"></i>
        <p style="margin-left: 10px">Active</p>
    </div>
    </div>



    <div>
        <div class="col-12 col-xl-12 d-flex justify-content-center" id="table-1">
            <div  class="table-style   mt-4 border shadow rounded-3 p-4" style="width: 82vw;margin-left: 20px;">
                <div class="pb-2"><h2>Active </h2></div>
                <div class="col mt-2 table-responsive pt-3" style="height: 130px; overflow-y: scroll">
                    <table class="table  table-hover">
                        <thead>
                        <tr class="table-primary">
                            <th scope="col">ID</th>
                            <th scope="col">Customer</th>
                            <th scope="col">Start Date</th>
                            <th scope="col">End Date</th>
                            <th scope="col">Driver</th>
                            <th scope="col">Amount</th>
                            <th scope="col">Option</th>
                        </tr>
                        </tr>
                        </thead>
                        <tbody id="tblCarActive">
                        <tr>
                            <th scope="row">INV-0123</th>
                            <td>Jhon Smith</td>
                            <td>10-Sep 2022</td>
                            <td>13-Sep 2022</td>
                            <td>Yes</td>
                            <td>100$</td>
                            <td>Paid</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div>
        <div class="col-12 col-xl-12 d-flex justify-content-center" id="table-2">
            <div  class="table-style   mt-4 border shadow rounded-3 p-4" style="width: 82vw;margin-left: 20px;">
                <div class="pb-2"><h2>Recent Requests</h2></div>
                <div class="col mt-2 table-responsive pt-3" style="height: 185px; overflow-y: scroll">
                    <table class="table  table-hover">
                        <thead>
                        <tr class="table-primary">
                            <th scope="col">ID</th>
                            <th scope="col">Customer</th>
                            <th scope="col">Start Date</th>
                            <th scope="col">End Date</th>
                            <th scope="col">Driver</th>
                            <th scope="col">Amount</th>
                            <th scope="col">Option</th>
                        </tr>
                        </tr>
                        </thead>
                        <tbody id="tblCarRequest">
                        <tr>
                            <th scope="row">INV-0123</th>
                            <td>Jhon Smith</td>
                            <td>10-Sep 2022</td>
                            <td>13-Sep 2022</td>
                            <td>Yes</td>
                            <td>100$</td>
                            <td>Paid</td>
                        </tr>
                        <tr>
                            <th scope="row">INV-0123</th>
                            <td>Jhon Smith</td>
                            <td>10-Sep 2022</td>
                            <td>13-Sep 2022</td>
                            <td>Yes</td>
                            <td>100$</td>
                            <td>Paid</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</main>
<!--Dashboard End-->


<!--Booking Start-->
<main class="container" id="booking-section">
    <div class="row">
        <div class="d-flex" style="margin-top: 25px;padding-left: 45px;padding-right: 19px;">
            <div class="col-6">
                <h4>Bookings</h4>
                <p>Manage your Bookings</p>
            </div>
            <div class="col-6 d-flex justify-content-end">
                <button class="btn h-75 mt-1 col-12 col-sm-6 col-md-6 col-xl-4" data-bs-toggle="modal" data-bs-target="#customerAddModal" style="background: #FF9F43;color: white;" >+ Rent Car</button>
            </div>
        </div>
    </div>

    <!--Add Rent Modal -->
    <div class="modal fade" id="customerAddModal" tabindex="-1" aria-labelledby="exampleCustomerModalLabel" aria-hidden="true">
        <div class="modal-dialog justify-content-center" style="margin-left: 300px;">
            <div class="modal-content" style="width: 60vw;">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleCustomerModalLabel">Rent Car</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="customerAddForm">
                        <div class="row">
                            <div class="col-xl-6">
                                <h1>Customer Details</h1>

                                <div class="form-group">
                                    <label>Booking ID :</label>
                                    <input class="form-control" id="txtReservationID" type="text">
                                    <span class="control-error"
                                          id="orderId-invalid-error"></span>
                                </div>

                                <div class="form-group">
                                    <label>Nic :</label>
                                    <input readonly class="form-control" id="txtUserModelNic" type="text">
                                    <span class="control-error"
                                          id="ModelNic-invalid-error"></span>
                                </div>

                                <div class="form-group">
                                    <label>Name :</label>
                                    <input readonly class="form-control" id="txtUserModelName" type="text">
                                    <span class="control-error"
                                          id="ModelName-invalid-error"></span>
                                </div>

                                <div class="form-group">
                                    <label>Address :</label>
                                    <input readonly class="form-control" id="txtUserModelAddress" type="text">
                                    <span class="control-error"
                                          id="ModelAddress-invalid-error"></span>
                                </div>

                                <div class="form-group">
                                    <label>Contact :</label>
                                    <input readonly class="form-control" id="txtUserModelContact" type="text">
                                    <span class="control-error"
                                          id="ModelContact-invalid-error"></span>
                                </div>

                                <div class="form-group">
                                    <label>Email :</label>
                                    <input readonly class="form-control" id="txtUserModelEmail" type="text">
                                    <span class="control-error"
                                          id="ModelEmail-invalid-error"></span>
                                </div>
                            </div>

                            <div class="col-xl-6">
                                <h1>Car Details</h1>

                                <div class="form-group">
                                    <label>Register ID :</label>
                                    <select class="form-control" id="selectCarCode"></select>
                                    <span class="control-error"
                                          id="CarRegId-invalid-error"></span>
                                </div>

                                <div class="d-flex justify-content-around ms-3">
                                    <div>
                                        <div class="form-group">
                                            <label>Car Model :</label>
                                            <input readonly class="form-control" id="txtCarModel" type="text">
                                            <span class="control-error"
                                                  id="CarModel-invalid-error"></span>
                                        </div>

                                        <div class="form-group">
                                            <label>Car Type :</label>
                                            <input readonly class="form-control" id="txtCarType" type="text">
                                            <span class="control-error"
                                                  id="CarType-invalid-error"></span>
                                        </div>

                                        <div class="form-group">
                                            <label>Car Transmission :</label>
                                            <input readonly class="form-control" id="txtCarTransmission" type="text">
                                            <span class="control-error"
                                                  id="CarTransmission-invalid-error"></span>
                                        </div>

                                        <div class="form-group">
                                            <label>Car Fuel :</label>
                                            <input readonly class="form-control" id="txtCarFuel" type="text">
                                            <span class="control-error"
                                                  id="CarFuel-invalid-error"></span>
                                        </div>

                                        <div class="form-group">
                                            <label>Available Cars :</label>
                                            <input readonly class="form-control" id="txtCarQty" type="text">
                                            <span class="control-error"
                                                  id="CarQty-invalid-error"></span>
                                        </div>

                                    </div>
                                    <div>
                                        <div class="form-group">
                                            <label>LossDamage :</label>
                                            <input readonly class="form-control" id="txtCarLossDamage" type="text">
                                            <span class="control-error"
                                                  id="LossDamage-invalid-error"></span>
                                        </div>

                                        <div class="form-group">
                                            <label>DailyRate :</label>
                                            <input readonly class="form-control" id="txtCarDailyRate" type="text">
                                            <span class="control-error"
                                                  id="CarDailyRate-invalid-error"></span>
                                        </div>

                                        <div class="form-group">
                                            <label>MonthlyRate :</label>
                                            <input readonly class="form-control" id="txtCarMonthlyRate" type="text">
                                            <span class="control-error"
                                                  id="MonthlyRate-invalid-error"></span>
                                        </div>

                                        <div class="form-group">
                                            <label>ExtraPriceKm :</label>
                                            <input readonly class="form-control" id="txtCarExtraPriceKm" type="text">
                                            <span class="control-error"
                                                  id="ExtraPriceKm-invalid-error"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xl-6">
                                <h1>Rent Summary</h1>
                                <div class="d-flex justify-content-around ms-3">
                                    <div>
                                        <div class="form-group">
                                            <label>Rent Start Date :</label>
                                            <input class="form-control" id="txtCarRentStartDate" type="date">
                                            <span class="control-error"
                                                  id="CarRentStartDate-invalid-error"></span>
                                        </div>
                                    </div>

                                    <div>
                                        <div class="form-group">
                                            <label>Rent End Date :</label>
                                            <input class="form-control" id="txtCarRentEndDate" type="date">
                                            <span class="control-error"
                                                  id="CarRentEndDate-invalid-error"></span>
                                        </div>
                                    </div>

                                    <div>
                                        <div class="form-group">
                                            <label>Car Qty :</label>
                                            <input class="form-control" id="txtCarRentQty" type="text">
                                            <span class="control-error"
                                                  id="CarRentQty-invalid-error"></span>
                                        </div>
                                    </div>
                                </div>

                                <div>

                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="flexRadioDefault" id="txtSelfDrive">
                                        <label class="form-check-label" for="txtSelfDrive">
                                            self Drive
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="flexRadioDefault" id="txtWithDriver" checked>
                                        <label class="form-check-label" for="txtWithDriver">
                                            With Driver
                                        </label>
                                    </div>

                                    <p>Driver Charge RS.1000/= per Day Additionally</p>
                                    <div class="col-xl-6">
                                        <h1>Total :</h1>
                                        <input class="form-control" id="txtTotal" type="text">
<!--                                        <h1 id="txtTotal">00.00</h1>-->
                                    </div>
                                </div>

                            </div>

                            <div class="col-xl-6">
                                <div class="d-flex justify-content-end" id="selectedImage" >

                                </div>
                            </div>

                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary ms-5 mt-3" id="totalCalBtn" type="button"> calculate Total</button>
                            <button class="btn btn-primary mt-3 col-12 col-sm-12 col-md-3 col-xl-2" type="button" id="rentRequestBtn">Request</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!--Add Rent Modal end-->

    <section class="row">
        <div class="col-12 col-xl-12 mt-3 " style="padding-left: 35px;padding-right: 15px;">
            <div class=" bg-light border shadow rounded-3 p-4">
                <div>
                    <div class="col-12 col-sm-6 col-md-4 col-xl-3 d-flex justify-content-center align-items-center">
                        <i class="fa-solid fa-magnifying-glass" id="seachIconCar"></i>
                        <input class="form-control" type="text" placeholder="Search.." id="searchCarInput">
                    </div>
                    <div class="col mt-2 table-responsive pt-3" style="height: 470px; overflow-y: scroll">
                        <table class="table  table-hover">
                            <thead>
                            <tr class="table-primary">
                                <th scope="col">ID</th>
                                <th scope="col">Customer</th>
                                <th scope="col">Start Date</th>
                                <th scope="col">End Date</th>
                                <th scope="col">Driver</th>
                                <th scope="col">Amount</th>
                                <th scope="col">Option</th>
                            </tr>
                            </tr>
                            </thead>
                            <tbody id="tblCar">
                            <tr>
                                <th scope="row">INV-0123</th>
                                <td>Jhon Smith</td>
                                <td>10-Sep 2022</td>
                                <td>13-Sep 2022</td>
                                <td>Yes</td>
                                <td>100$</td>
                                <td>Paid</td>
                            </tr>
                            <tr>
                                <th scope="row">INV-0123</th>
                                <td>Jhon Smith</td>
                                <td>10-Sep 2022</td>
                                <td>13-Sep 2022</td>
                                <td>Yes</td>
                                <td>100$</td>
                                <td>Paid</td>
                            </tr>
                            <tr>
                                <th scope="row">INV-0123</th>
                                <td>Jhon Smith</td>
                                <td>10-Sep 2022</td>
                                <td>13-Sep 2022</td>
                                <td>Yes</td>
                                <td>100$</td>
                                <td>Paid</td>
                            </tr>
                            <tr>
                                <th scope="row">INV-0123</th>
                                <td>Jhon Smith</td>
                                <td>10-Sep 2022</td>
                                <td>13-Sep 2022</td>
                                <td>Yes</td>
                                <td>100$</td>
                                <td>Paid</td>
                            </tr>
                            <tr>
                                <th scope="row">INV-0123</th>
                                <td>Jhon Smith</td>
                                <td>10-Sep 2022</td>
                                <td>13-Sep 2022</td>
                                <td>Yes</td>
                                <td>100$</td>
                                <td>Paid</td>
                            </tr>
                            <tr>
                                <th scope="row">INV-0123</th>
                                <td>Jhon Smith</td>
                                <td>10-Sep 2022</td>
                                <td>13-Sep 2022</td>
                                <td>Yes</td>
                                <td>100$</td>
                                <td>Paid</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>

</main>
<!--Booking End-->

<!--profile Start-->
<main class="container" id="profile-section">
    <div class="row">
        <div class="d-flex" style="margin-top: 25px;padding-left: 45px;padding-right: 19px;">
            <div class="col-6">
                <div class="d-flex">
                    <h2>Hello</h2>
                    <h2 id="txtProName" style="margin-left: 10px"></h2>
                    <h2>,</h2>
                </div>
                <p>Manage your Profile</p>
            </div>
        </div>
    </div>

    <section class="row">
        <div class="col-12 col-xl-12 mt-3 " style="padding-left: 35px;padding-right: 15px;">
            <div class=" bg-light border shadow rounded-3 p-4" style="height: 540px">

                <div class="d-flex justify-content-center mt-5">
                    <form id="userForm">
                        <div class="input-group mb-3">
                            <span class="input-group-text"><i class="fa fa-user"></i></span>
                            <input readonly type="text" class="form-control" placeholder="Name" id="txtUserName" name="name">
                        </div>
                        <div class="input-group mb-3">
                            <span class="input-group-text"><i class="fa fa-list-numeric"></i></span>
                            <select class="form-control" id="txtUserGender" name="gender">
                                <option value="None">Select Gender</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                            </select>
                        </div>
                        <div class="input-group mb-3">
                            <span class="input-group-text"><i class="fa fa-address-book"></i></span>
                            <input type="text" class="form-control" placeholder="Address" id="txtUserAddress" name="address">
                        </div>
                        <div class="input-group mb-3">
                            <span class="input-group-text"><i class="fa fa-phone"></i></span>
                            <input type="text" class="form-control" placeholder="Contact Number" id="txtUserContact"
                                   name="contact">
                        </div>

                        <div class="input-group mb-3">
                            <span class="input-group-text"><i class="fa fa-envelope"></i></span>
                            <input type="text" class="form-control" placeholder="Email" id="txtUserEmail" name="email">
                        </div>

                        <!--image upload section start-->
                        <div class="input-group mb-3">
                            <span class="input-group-text"><i class="fa fa-list-numeric"></i></span>
                            <input readonly type="text" class="form-control" placeholder="Nic/License Number" id="txtUserNic" name="nic/licenseNo">
                            <span class="input-group-text"><i class="fa fa-file"></i></span>
                            <input id="file-1" type="file" name="nic/licensePhoto" class="form-control" placeholder="Nic Photo Upload here">
                        </div>
                        <!--image upload section end-->

                        <div class="input-group mb-3">
                            <span class="input-group-text"><i class="fa fa-lock"></i></span>
                            <input type="password" class="form-control" placeholder="Password" id="txtUserPwd" name="userPwd">
                        </div>
                        <div class="d-grid mb-3">
                            <button type="button" class="btn btn-primary" id="btnUpdateUser">Update</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

</main>
<!--profile end-->

<script src="assets/js/jquery-3.6.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
<script src="assets/js/customerNavJs.js"></script>

<script>
    let baseUrl = "http://localhost:8080/Car_Rental_System_war/";

    loadAllDetails();

    loadAllCars();

    function loadAllDetails() {

        $.ajax({
            url: baseUrl+"login/user",
            dataType: "json",
            success: function (resp) {
                console.log(resp)
                $("#txtProName").text(resp.data.name);
                $('#proTile').text(resp.data.name+" | Online Booking");
                $("#txtUserName").val(resp.data.name);
                $("#txtUserGender").val(resp.data.gender);
                $("#txtUserAddress").val(resp.data.address);
                $("#txtUserContact").val(resp.data.contact);
                $("#txtUserEmail").val(resp.data.email);
                $("#txtUserNic").val(resp.data.nicNo);


                $("#txtUserModelNic").val(resp.data.nicNo);
                $("#txtUserModelName").val(resp.data.name);
                $("#txtUserModelAddress").val(resp.data.address);
                $("#txtUserModelContact").val(resp.data.contact);
                $("#txtUserModelEmail").val(resp.data.email);

            }
        });
    }

    $("#btnUpdateUser").click(function () {
        let res = confirm("Do you want to add this Update Profile.?");
        if (res) {
            let name =$("#txtUserName").val();
            let gender =$("#txtUserGender").val();
            let address =$("#txtUserAddress").val();
            let contact =$("#txtUserContact").val();
            let email =$("#txtUserEmail").val();
            let nicNo =$("#txtUserNic").val();
            let userPwd =$("#txtUserPwd").val();

            var customerOb = {
                name:name,
                gender: gender,
                address: address,
                contact: contact,
                email: email,
                nicNo:nicNo,
                userPwd: userPwd,
            }

            $.ajax({
                url: baseUrl+"customer",
                method: "put",
                contentType: "application/json",
                data: JSON.stringify(customerOb),
                dataType: "json",
                success: function (resp) {
                    alert(resp.message);
                },
                error: function (error) {
                    let message = JSON.parse(error.responseText).message;
                    alert(message);
                }
            });

        }else {
            alert("Update Failed..!");
        }
    });

    function loadAllCars() {
        $("#selectCarCode").empty();
        $.ajax({
            url: baseUrl + "car",
            success: function (res) {
                for (let c of res.data) {
                    console.log(c);
                    let code = c.regNo;
                    $("#selectCarCode").append(`<option value="${code}">${code}</option>`);
                }
            },
            error: function (error) {
                let message = JSON.parse(error.responseText).message;
                alert(message);
            }
        });
    }

    function searchCar(code) {
        let response = "";
        $.ajax({
            url: baseUrl + "car",
            dataType: "json",
            async: false,
            success: function (resp) {
                response = resp.data.filter((i) => {
                    return i.regNo == code;
                });
            }
        });
        return response;
    }

    $("#selectCarCode").change(function () {
        let content = '';
        let code = $("#selectCarCode").val();
        let res = searchCar(code);
        if (res.length > 0) {
            $("#txtCarModel").val(res[0].carModel);
            $("#txtCarType").val(res[0].carType);
            $("#txtCarTransmission").val(res[0].carTransmission);
            $("#txtCarFuel").val(res[0].fuelType);
            $("#txtCarLossDamage").val(res[0].lossDamage);
            $("#txtCarDailyRate").val(res[0].dailyRate);
            $("#txtCarMonthlyRate").val(res[0].monthlyRate);
            $("#txtCarExtraPriceKm").val(res[0].extraKm);
            $("#txtCarQty").val(res[0].qty);

            content +=`

            <img src="${baseUrl + res[0].carImageUrl}" alt="car" style=" width: 415px;height: 261px;margin-right: 2px;margin-bottom: 6px;margin-top: 54px;">

            `

            document.querySelector("#selectedImage").innerHTML = content;

        }
    });

    $("#totalCalBtn").click(function () {
        let total=0;
        const diffInMs=new Date($("#txtCarRentEndDate").val()) - new Date($("#txtCarRentStartDate").val());
        const diffInDays= diffInMs/(1000 * 60 * 60 * 24);
        const remainDays=diffInDays % 30;
        let driverCharge = 0;

        if ($("#txtWithDriver").is(":checked")){
            driverCharge = 1000 * diffInDays;
        }else if ($("#txtSelfDrive").is(":checked")){
            driverCharge = 0;
        }

        let dailyRate = $("#txtCarDailyRate").val();
        let monthlyRate = $("#txtCarMonthlyRate").val();
        if (diffInDays<20){
            total = dailyRate * diffInDays;
        }else if(diffInDays>20){
            total = monthlyRate * diffInDays/20;
        }

        let qty = $("#txtCarRentQty").val();
        let lossdamage = $("#txtCarLossDamage").val();

        let totls=lossdamage*qty;

        let tot=total*qty;

        $("#txtTotal").val(tot+driverCharge+totls);

        // console.log(totalRent);
        // if ($("input[name='bk_withdriver']:checked").val() == "withdriver"){
        //     totalRent=totalRent+days*1000;
        // }
        // $("#bk_total").val(totalRent);
        //
    });

    $("#rentRequestBtn").click(function () {
        let resId = $("#txtReservationID").val();
        let pickDate = $("#txtCarRentStartDate").val();
        let endDate = $("#txtCarRentEndDate").val();
        let qty = $("#txtCarRentQty").val();
        let total = $("#txtTotal").val();
        let status="pending"

        let cusId = $("#txtUserModelNic").val();
        // let carId = $("#selectCarCode").val();
        let cus=getCustomerDetails(cusId);
        // let ob={
        //     resId:resId,
        //     pickDate:pickDate,
        //     returnDate:endDate,
        //     qty:qty,
        //     total:total,
        //     status:status,
        //     cus:cus,
        // }
        //
        // //send request
        // $.ajax({
        //     url: baseUrl + "reservation",
        //     method:"post",
        //     dataType: "json",
        //     data:JSON.stringify(ob),
        //     contentType:"application/json",
        //     success: function (resp) {
        //         alert(resp.message);
        //     },
        //     error:function (error){
        //         alert(JSON.parse(error.responseText).message);
        //     }
        // });

    });

    function getCustomerDetails(cusId) {
        let cus ="";
        $.ajax({
            url: baseUrl+"customer?nicNo"+cusId,
            success: function (res) {
                cus=res;
                console.log(cus);
            },
            error: function (error) {
                let message = JSON.parse(error.responseText).message;
                alert(message);
            }
        });

        return cus;
    }

</script>
</body>
</html>